{% extends "base.html" %}
{% block container %}
	<div id="map"></div>
	<style>
		html, body { height: 100%; }
		 #map { height: 90%;}
	</style>
	<script type="text/javascript">
		function circles(feature, layer_lay){
			var opacities = feature.properties.circles.opacities;
			var lat_longs = feature.geometry.coordinates[0];
			var i = 0;
			for (var op of opacities){
				if(op>0.0 && op<1.0){
                    latitude = lat_longs[i][1];
                    longitude = lat_longs[i][0]
					var circle = new L.circle(new L.LatLng(lat_longs[i][1], lat_longs[i][0]), 20, {
						stroke: true,
						opacity: op, 
						color: feature.style.color,
						fill: true,
						fillColor: feature.style.color, 
						fillOpacity: op,
					});
                    circle.addTo(layer_lay);
				}
				i++;
			}
		}



		var map = L.map('map', {
			center: [36, 138],
			zoom: 6,
			
		});

		var tileLayer = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
			attribution: 'Â© OpenStreetMap contributors',
			onEachFeature: circles,	
			style: function(feature) {return {"color": feature.style.color};}
		}).addTo(map);
		

        $.getJSON("/data/cooccurrences?useruuid="+encodeURIComponent("c98f46b9-43fd-4536-afa0-9b789300fe7a"), function(data)
        {
            console.log(data);
            L.geoJson(data,
            {
            }).addTo(map);
        });

</script>
{% endblock %}