{% extends "base.html" %}
{% block container %}

<div id="container">
  <style>
    #graph-container {
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      position: absolute;
    }
  </style>
  <div id="graph-container"></div>
</div>

<script type="text/javascript">
$.getJSON( "data/network", function( data ) {
	var graph = data["results"];
	console.log(graph);
    var sig = new sigma({
    container: 'graph-container',
    graph: graph,
    settings: {
      defaultNodeColor: '#ec5148'
    }});

    var i,
    nodes = sig.graph.nodes(),
    len = nodes.length;

    for (i = 0; i < len; i++) {
        nodes[i].x = Math.random();
        nodes[i].y = Math.random();
        nodes[i].size = sig.graph.degree(nodes[i].id);
    }

    // Refresh the display:
    sig.refresh();

    // ForceAtlas Layout
    sig.startForceAtlas2({barnesHutOptimize:true, strongGravityMode:true});
    var dragListener = new sigma.plugins.dragNodes(sig, sig.renderers[0]);
    // stop force atlas algorithm after 5sec
    setTimeout( function(){ 
    	sig.stopForceAtlas2();	
  	}  , 5000 );
});

</script>
{% endblock %}